<!DOCTYPE html>
<html lang="en">
<head>
<title>refigure2</title>
<meta charset="utf-8" />
<link rel="stylesheet" href="style.css" />
</head>
<body>
<h1><a id="top">refigure<span>2</span></a></h1>

<p><em>refigure2</em> is an extension for <a href="http://www.reinteract.org/">Reinteract</a> that allows the embedding of <a href="http://matplotlib.sourceforge.net/">matplotlib</a> plots.  It does so with a syntax reminiscent of <a href="http://matplotlib.sourceforge.net/pylab_commands.html">pylab</a>, matplotlib's procedural (MATLAB&trade;-like) interface.  refigure2 is a spiritual successor to <a href="http://jfi.uchicago.edu/~rschroll/refigure/">refigure</a>, though the two share little code and less syntax.</p>

<h2><a id="features">Features</a></h2>
<p><a href="http://git.fishsoup.net/cgit/reinteract/tree/lib/replot.py">Other</a> 
<a href="http://www.reinteract.org/trac/ticket/33">extensions</a> 
<a href="http://ramshacklecode.googlepages.com/#rematplotlib">embed</a>
matplotlib figures in Reinteract, but refigure2 has three notable features:</p>

<ol>
<li>Entire figures are embedded in the notebook. This allows the creation of figures with multiple axes.  Additionally, the inclusion of the figure's toolbar allows interactive panning, zooming, and more.</li>
<li>Most<a class="note" href="#note">&#8224;</a> of the pylab commands are available.  They are grouped together within a <code>with</code> block in order to operate on a single figure.</li>
<li>Existing plotting routines based on matplotlib can be used unchanged, provided that they don't insist on creating their own figures for plotting.  This means that refigure2 is compatible with toolkits like <a href="http://matplotlib.sourceforge.net/basemap/doc/html/">Basemap</a> and <a href="http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/index.html">mplot3d</a>.  See the refigure2 gallery [<a href="http://github.com/rschroll/refigure2/tarball/gallery" title="Reinteract notebook in a gzipped tar file">.tar.gz</a>|<a href="http://github.com/rschroll/refigure2/zipball/gallery" title="Reinteract notebook in a zip file">.zip</a>] for examples.</li>
</ol>

<h2><a id="news">What's New</a></h2>
<h3>0.3</h3>
<p>Several bug fixes and improvements:</p>
<ul>
<li>Fixed a bug in creating the solo functions, so that future versions of matplotlib will be handled more smoothly.</li>
<li>The <a href="https://github.com/rschroll/refigure2/issues#issue/1">redraw bug</a> has been squashed, although <a href="https://bugzilla.gnome.org/show_bug.cgi?id=642527">another bug</a>, related to reference counting, was uncovered.</li>
<li>Reinteract's printing mechanism is now supported, with three different printing methods:
	<ul>
	<li>When using the GTKCario backend, printing is done directly in Cairo.</li>
	<li>Otherwise, if you have the Python Poppler bindings, printing is done through a PDF file, for full vector goodness.</li>
	<li>As a last resort, printing is via a bitmap.  The resolution is taken from <code>rcParams['savefig.dpi']</code>, so bump that up to get good results.</li>
	</ul></li>
<li>refigure2 can take advantage of a patch to Reinteract to manipulate the output that goes into the worksheet.  <a href="output.html">More details.</a></li>
</ul>

<h3>0.2</h3>
<p>The locking mechanism has been fixed.</p>

<h3>0.1</h3>
<p>Initial release.</p>

<h2><a id="screenshot">Screenshot</a></h2>
<img src="screenshot.png" width="491" height="689" alt="Screenshot" />

<h2><a id="get">Getting It</a></h2>
<p>Download the <a href="http://github.com/rschroll/refigure2/raw/version-0.3/refigure2.py">single .py file</a>.  Place it in your <code>~/.reinteract/modules</code> folder, which you may need to create.  (It can also go in the <code>reinteract/lib</code> folder of your Reinteract installation, or somewhere else on your <code>sys.path</code>.)</p>

<p>refigure2 is hosted at <a href="http://github.com/rschroll/refigure2">github</a>, so if you want to hack it, you can clone the repository <code>git://github.com/rschroll/refigure2.git</code></p>

<h2><a id="use">Using It</a></h2>
<p>Import the refigure2 module.  For interactive work, I find it much easier to import it into the current namespace.  refigure2 tries to avoid unnecessary namespace pollution.</p>
<div><pre>from refigure2 import *</pre></div>
<p>You'll almost always want numpy as well:</p>
<div><pre>from numpy import *</pre></div>

<p>Single pylab commands<a class="note" href="#note">&#8224;</a> can be given alone, to create simple plots:</p>

<div><pre>plot([1,2,3])</pre></div>
<p>Multiple pylab commands can be grouped together in a <code>with</code> block.</p>
<div><pre>with figure() as f:
    plot([1,2,3])
    ylim(0,5)
    title('Plot title')
    f
</pre></div>

<p>refigure2 requires the use a GTK-based backend.  If you use another backend by default, refigure2 will attempt to select an appropriate GTK backend.  Should you wish to override this choice, include these commands <em>before</em> importing refigure2:</p>
<div><pre>from matplotlib import use</pre></div>
<div><pre>use('GTKAgg')</pre></div>
<p>(<code>'GTK'</code> or <code>'GTKCairo'</code> may be used instead.)</p>

<p>More details can be found in the refigure2 tutorial [<a href="http://github.com/rschroll/refigure2/tarball/tutorial" title="Reinteract notebook in a gzipped tar file">.tar.gz</a>|<a href="http://github.com/rschroll/refigure2/zipball/tutorial" title="Reinteract notebook in a zip file">.zip</a>].</p>

<p class="note"><a class="note" id="note">&#8224;</a> Most of the pylab commands work in refigure.  <code>ginput()</code> is known not to work; others may also fail. <code>show()</code> and <code>draw()</code> don't work, but they aren't needed.  <code>figure()</code> works differently in refigure than in matplotlib; see the tutorial for details.</p>

<h2><a id="issues">Known Issues</a></h2>

<p>Bugs will be tracked on the <a href="http://github.com/rschroll/refigure2/issues">github issue tracker</a>.</p>

<p><code>ginput()</code> is known not to work.  Other functions may also fail &mdash; please report them.</p>

<p>Settings made in <code>rcParams</code> leak between open worksheets, even if they're not part of the same notebook.  This is because modules are singletons in Python.  Therefore, all open worksheets share the same refigure2 object, which contains <code>rcParams</code>.  Reinteract must be completely closed to reset these settings (or you can manually tweak <code>rcParams</code>).  I don't know if this is fixable within refigure2.  As a work-around, <code>rclocal</code> can be used to adjust <code>rcParams</code> for the current figure only.</p>

<p>refigure2 is known to work with versions 0.98.5.2&ndash;0.99.1.1 of matplotlib. Please let me know if it works (or doesn't) with other versions of matplotlib.</p>

<ul id="contents">
<li><a href="#top">Top</a></li>

<li><a href="#features">Features</a></li>
<li><a href="#news">What's New</a></li>
<li><a href="#screenshot">Screenshot</a></li>
<li><a href="#get">Getting It</a></li>
<li><a href="#use">Using It</a></li>
<li><a href="#issues">Known Issues</a></li>
</ul>

<p class="note">Robert Schroll, rschroll at gmail dot com</p>
</body>

</html>
